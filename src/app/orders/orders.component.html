<div class="orders-page">
  <h2 class="page-title">ğŸ“¦ My Orders</h2>

  <div *ngIf="loading" class="loading">â³ Loading...</div>
  <div *ngIf="error" class="error">âš ï¸ {{ error }}</div>

  <div *ngIf="!loading && orders.length === 0" class="empty">
    ğŸšï¸ You havenâ€™t placed any orders yet.
  </div>

  <div class="order-card" *ngFor="let order of orders">
    <div class="order-summary">
      <img [src]="order.imageUrl || 'assets/default-product.jpg'" alt="{{ order.productName }}" class="product-img" />

      <div class="order-info">
        <h3>{{ order.productName }}</h3>
        <p>Color: {{ order.color || 'N/A' }} | Size: {{ order.size || 'â€”' }}</p>
        <p class="price">
          â‚¹{{ order.total }}
          <span *ngIf="order.originalPrice && order.total < order.originalPrice" class="saved">
            You saved â‚¹{{ order.originalPrice - order.total }}
          </span>
        </p>

        <div class="status-line" [ngClass]="{
          'delivered': order.status === 'Delivered',
          'cancelled': order.status === 'Cancelled',
          'refund': order.status === 'Refund Completed'
        }">
          <span *ngIf="order.status === 'Delivered'">âœ… Delivered on {{ order.date | date:'MMM d' }}</span>
          <span *ngIf="order.status === 'Refund Completed'">ğŸ’° Refund completed</span>
          <span *ngIf="order.status === 'Cancelled'">âŒ Order Cancelled</span>
        </div>

        <div *ngIf="order.refundInfo" class="refund-box">
          <p><b>Refund ID:</b> {{ order.refundInfo.id }}</p>
          <p>Refund of â‚¹{{ order.refundInfo.amount }} added to your account on {{ order.refundInfo.date | date:'MMM d, h:mm a' }}</p>
          <p class="refund-note">If refund not visible, please contact your bank with reference: {{ order.refundInfo.refNumber }}</p>
        </div>

        <div *ngIf="order.groupDeal" class="group-savings">
          ğŸ‰ You saved â‚¹{{ order.groupDeal.savings }} via group deal!
        </div>

        <div class="actions">
          <button class="btn btn-review">â­ Rate & Review</button>
          <button *ngIf="order.status === 'Delivered'" class="btn btn-track">ğŸ“ Track Order</button>
          <button *ngIf="order.status === 'Pending'" (click)="cancelOrder(order)" class="btn btn-cancel">âŒ Cancel</button>
        </div>
      </div>
    </div>
  </div>
</div>
