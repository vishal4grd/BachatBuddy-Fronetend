<div class="home-wrapper">

  <!-- Hero Section -->
  <section class="hero-section">
    <div class="hero-text">
      <h1>Welcome to <span>BachatBuddy ğŸ›ï¸</span></h1>
      <p>Your AI-powered shopping buddy to save more with group deals in India!</p>
      <a routerLink="/products" class="explore-btn">ğŸ›’ Start Shopping</a>
    </div>
    <div class="hero-image-emoji" aria-label="Shopping together" role="img">
      <span class="emoji">ğŸ›ï¸ğŸ›’ğŸ‘«</span>
    </div>

  </section>

  <!-- How It Works Section -->
  <section class="how-it-works">
    <h2>ğŸ“¦ How It Works</h2>
    <div class="steps">
      <div class="step">
        <div class="icon">ğŸ”</div>
        <h4>Browse Products</h4>
        <p>Explore top electronics, groceries, fashion & more at the best prices.</p>
      </div>
      <div class="step">
        <div class="icon">ğŸ‘¥</div>
        <h4>Join a Group</h4>
        <p>Join others to unlock lower prices through group buying.</p>
      </div>
      <div class="step">
        <div class="icon">ğŸ’°</div>
        <h4>Save Big!</h4>
        <p>The more people join, the lower the price. You save more, together!</p>
      </div>
    </div>
  </section>


  <!-- Popular Group Deals -->
  <section class="group-deals">
    <h2>ğŸ”¥ Popular Group Deals</h2>

    <!-- Loading State -->
    <div *ngIf="loading" class="loading-message">
      <p>Loading amazing deals... ğŸ›ï¸</p>
    </div>

    <!-- Error State -->
    <div *ngIf="error && !loading" class="error-message">
      <p>{{ error }}</p>
    </div>

    <!-- Products Grid -->
    <div class="deal-cards" *ngIf="!loading && !error">
      <div class="deal-card" *ngFor="let item of popularProducts">
        <img [src]="item.productImage" [alt]="item.productName" />
        <h4>{{ item.productName }}</h4>
        <p>
          <del>â‚¹{{ item.originalPrice }}</del>
          <strong>â‚¹{{ item.groupPrice }} (Group Price)</strong>
        </p>
        <div class="progress-bar-container">
          <div class="progress-bar" [style.width.%]="item.progressPercentage"></div>
        </div>
        <p>{{ item.currentJoined }} joined / {{ item.totalNeeded }} needed</p>
        <button class="btn-join" (click)="joinGroup(item.id)" [disabled]="item.hasUserJoined || item.isGroupComplete">
          {{ item.hasUserJoined ? 'Already Joined' : item.isGroupComplete ? 'Group Full' : 'Join Group' }}
        </button>
      </div>
    </div>
  </section>

  <!-- Ask Buddy CTA -->
  <section class="ask-buddy-cta">
    <h3>ğŸ’¬ Need help choosing?</h3>
    <p><strong>Ask Buddy</strong> to find the best deals for your needs!</p>
    <a routerLink="/assistant" class="btn-outline">Ask Buddy Now</a>
  </section>

</div>