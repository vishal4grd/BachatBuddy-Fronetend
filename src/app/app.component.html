<div class="pdd-container">

  <!-- Navbar -->
  <nav class="pdd-navbar">
    <!-- Logo -->
    <a class="brand-logo" routerLink="/home">
      <div class="logo-text">BachatBuddy ğŸ›ï¸</div>
    </a>

    <!-- Main Navigation Links (Side Drawer on Mobile) -->
    <div class="nav-links" [class.active]="isMenuOpen">
      <button class="close-menu-btn" *ngIf="isMenuOpen" (click)="closeMenu()" aria-label="Close menu">&times;</button>

      <!-- Menu Items -->
      <a routerLink="/home" class="nav-link" (click)="closeMenu()">ğŸ  Home</a>
      <a routerLink="/groceries" class="nav-link" (click)="closeMenu()">ğŸ¥¦ Groceries</a>
      <a routerLink="/electronics" class="nav-link" (click)="closeMenu()">ğŸ”Œ Electronics</a>
      <a routerLink="/fashion" class="nav-link" (click)="closeMenu()">ğŸ‘— Fashion</a>
      <a routerLink="/beauty" class="nav-link" (click)="closeMenu()">ğŸ’„ Beauty</a>
      <a routerLink="/products" class="nav-link" (click)="closeMenu()">ğŸ’ Wedding Bazaar</a>
      <a routerLink="/deals" class="nav-link" (click)="closeMenu()">ğŸ”¥ Deals</a>

      <!-- Auth & Profile Section (Moved inside drawer for mobile) -->
      <div class="drawer-auth-links">
        <!-- ğŸ‘¤ Profile Dropdown (only when logged in) -->
        <ng-container *ngIf="isLoggedIn">
          <div class="profile-dropdown" (click)="toggleProfileDropdown($event)">
            <img src="https://cdn-icons-png.flaticon.com/512/3135/3135715.png" alt="Profile" class="profile-icon" />
            <div class="dropdown-content" *ngIf="isProfileDropdownOpen">
              <div class="profile-header">
                <p class="username">{{ userName }}</p>
                <hr />
              </div>
              <a routerLink="/orders">ğŸ›’ My Orders</a>
              <a routerLink="/address">ğŸ  Address</a>
              <a routerLink="/coupons">ğŸŸï¸ Coupons</a>
              <a (click)="logout()">ğŸšª Logout</a>
            </div>
          </div>
        </ng-container>

        <!-- ğŸ’¬ Ask Buddy Button -->
        <a routerLink="/assistant" class="nav-link ask-buddy-btn" title="Need help? Ask Buddy ğŸ’¬">
          ğŸ’¬ Ask Buddy
        </a>

        <!-- ğŸ” Login/Register if not logged in -->
        <ng-container *ngIf="!isLoggedIn">
          <a routerLink="/login" class="nav-link">ğŸ” Login</a>
          <a routerLink="/register" class="nav-link">ğŸ†• Register</a>
        </ng-container>
      </div>
    </div>

    <!-- ğŸ›’ Cart Link (Always Visible, Outside Drawer) -->
    <a routerLink="/cart" class="nav-link cart-link header-cart">
      <span class="cart-icon black-cart">ğŸ›’</span>
      <span class="cart-text">Cart</span>
      <span *ngIf="cartCount > 0" class="cart-badge">{{ cartCount }}</span>
    </a>

    <!-- Hamburger Menu Button -->
    <button class="hamburger-btn" (click)="toggleMenu()" aria-label="Toggle menu">
      <span class="hamburger-line"></span>
      <span class="hamburger-line"></span>
      <span class="hamburger-line"></span>
    </button>

    <!-- Backdrop -->
    <div class="menu-backdrop" *ngIf="isMenuOpen" (click)="closeMenu()"></div>

  </nav>

  <!-- Search Bar -->
  <div class="search-bar-wrapper">
    <input class="search-bar" id="txtsearch" type="text" placeholder="ğŸ” Search for products, deals, discounts..." />
    <button class="search-btn" (click)="show()">Search</button>
  </div>

</div>

<!-- Page Router Outlet -->
<div class="main-content">
  <router-outlet></router-outlet>
</div>