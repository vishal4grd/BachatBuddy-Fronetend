<div class="checkout-page">
  <div class="left-section">
    <!-- Step 1 -->
    <div class="card-section">
      <h3>1. LOGIN</h3>
      <div class="info-row">
        <p><strong>BachatBuddy Customer</strong> +91 6361339120</p>
        <button class="link-btn">Change</button>
      </div>
    </div>

    <!-- Step 2 -->
    <div class="card-section">
      <h3>2. DELIVERY ADDRESS</h3>

      <div class="address-list">
        <div
          *ngFor="let a of addresses; let i = index"
          class="address-card"
          [class.selected]="i === selectedAddressIndex"
          (click)="selectAddress(i)"
        >
          <input type="radio" [checked]="i === selectedAddressIndex" />
          <div>
            <strong>{{ a.name }}</strong> ({{ a.phone }})
            <p>{{ a.address }}</p>
          </div>
        </div>
      </div>

      <button class="link-btn" (click)="toggleEdit()">
        {{ editMode ? 'Cancel' : '+ Add New Address' }}
      </button>

      <div *ngIf="editMode" class="add-address-box">
        <textarea
          [(ngModel)]="newAddress"
          placeholder="Enter full address"
        ></textarea>
        <button class="save-btn" (click)="saveNewAddress()">Save Address</button>
      </div>
    </div>

    <!-- Step 3 -->
    <div class="card-section" *ngIf="product">
      <h3>3. ORDER SUMMARY</h3>
      <div class="order-item">
        <img [src]="product.pimage" alt="{{ product.pname }}" />
        <div class="order-info">
          <h4>{{ product.pname }}</h4>
          <p>Qty: 1</p>
          <p>Price: â‚¹{{ product.price }}</p>
          <p class="saving">You Save â‚¹{{ totalSavings }}</p>
        </div>
      </div>
    </div>

    <!-- Step 4 -->
    <div class="card-section">
      <h3>4. PAYMENT OPTIONS</h3>
      <div class="payment-options">
        <label>
          <input type="radio" name="payment" (click)="selectPaymentMode('UPI')" />
          UPI
        </label>
        <label>
          <input type="radio" name="payment" (click)="selectPaymentMode('Card')" />
          Credit/Debit Card
        </label>
        <label>
          <input type="radio" name="payment" (click)="selectPaymentMode('COD')" />
          Cash on Delivery
        </label>
      </div>
      <button class="confirm-btn" (click)="confirmOrder()">Confirm Order</button>
    </div>
  </div>

  <!-- RIGHT SIDE -->
  <div class="right-section" *ngIf="product">
    <div class="price-box">
      <h3>PRICE DETAILS</h3>
      <div class="price-row">
        <span>Price (1 item)</span>
        <span>â‚¹{{ product.price }}</span>
      </div>
      <div class="price-row">
        <span>Discount</span>
        <span class="green">âˆ’ â‚¹{{ totalSavings }}</span>
      </div>
      <hr />
      <div class="price-row total">
        <strong>Total Payable</strong>
        <strong>â‚¹{{ totalPrice }}</strong>
      </div>
      <div class="savings-text">
        ðŸŽ‰ You saved â‚¹{{ totalSavings }} on this order!
      </div>
    </div>
  </div>
</div>
