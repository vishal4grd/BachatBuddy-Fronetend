<div class="container py-4">
  <h2 class="text-center mb-4">ğŸ›’ Explore Products with Group Deals</h2>

  <!-- Category Filter -->
  <div class="d-flex justify-content-center mb-4 flex-wrap gap-2">
    <button
      *ngFor="let cat of categories"
      class="btn"
      [ngClass]="selectedCategory === cat ? 'btn-primary' : 'btn-outline-primary'"
      (click)="filterByCategory(cat)"
    >
      {{ cat }}
    </button>
  </div>

  <!-- Products -->
  <div class="row g-4">
    <div class="col-md-4 col-sm-6" *ngFor="let i of filteredProducts">
      <div class="card h-100 shadow border-0 hover-shadow" 
           (click)="viewDetails(i.pid)" 
           style="cursor: pointer;">
        <div class="position-relative">
          <img [src]="i.pimage" class="card-img-top p-3 rounded" alt="{{ i.pname }}" style="height: 220px; object-fit: contain;" />
          <span class="badge bg-success position-absolute top-0 start-0 m-2">{{ i.category }}</span>
        </div>
        <div class="card-body">
          <h5 class="card-title fw-bold">{{ i.pname }}</h5>
          <p class="card-text text-muted small mb-2">{{ i.shortDesc }}</p>
          <p class="mb-2">
            <span class="text-decoration-line-through">{{ i.price | currency:'INR' }}</span>
            <span class="fw-bold text-success ms-2">{{ i.price | discount:30 | currency:'INR' }}</span>
          </p>

          <div class="bg-light p-2 rounded mb-2">
            ğŸ‰ <strong>Group Deal:</strong> 7 joined / 10 needed
            <div class="progress mt-1" style="height: 6px;">
              <div class="progress-bar bg-success" style="width: 70%;"></div>
            </div>
          </div>

          <div class="d-flex justify-content-between" (click)="$event.stopPropagation()">
            <button class="btn btn-outline-secondary w-50 me-1" (click)="addToCart(i)">
              ğŸ›’ Add to Cart
            </button>
            <button class="btn btn-primary w-50" (click)="buyNow(i.pid)">
              ğŸ›ï¸ Buy Now
            </button>
          </div>
        </div>
      </div>
    </div>
  </div>
</div>
